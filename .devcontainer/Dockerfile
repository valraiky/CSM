FROM node:20.15.0-buster-slim

WORKDIR /workspace

# ðŸ“¦ Installer git et les outils nÃ©cessaires
USER root

RUN apt-get update && \
    DEBIAN_FRONTEND=noninteractive apt-get install -y git && \
    rm -rf /var/lib/apt/lists/*

# ðŸ“¦ Installer les packages globaux en tant que root
RUN npm install -g typescript ts-node nodemon

# âœ… Copier le projet dans lâ€™image
COPY . .

# âœ… Corriger les permissions du dossier de travail
RUN chown -R node:node /workspace

# ðŸ‘¤ Passer Ã  lâ€™utilisateur non-root
USER node

CMD ["bash"]
